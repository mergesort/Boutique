{"abstract":[{"type":"text","text":"The "},{"isActive":true,"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store","type":"reference"},{"type":"text","text":" is at the heart of what makes Boutique, Boutique."}],"sections":[],"metadata":{"role":"article","title":"Using Stores","roleHeading":"Article","modules":[{"name":"Boutique"}]},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/Boutique\/documentation\/Boutique\/Using-Stores"},"schemaVersion":{"patch":0,"minor":3,"major":0},"variants":[{"paths":["\/documentation\/boutique\/using-stores"],"traits":[{"interfaceLanguage":"swift"}]}],"kind":"article","primaryContentSections":[{"kind":"content","content":[{"level":2,"anchor":"Overview","type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"text":"The ","type":"text"},{"type":"reference","isActive":true,"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store"},{"text":" is the data storage primitive of a Boutique app, providing two layers of persistence. For every item you save to the ","type":"text"},{"type":"reference","identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store","isActive":true},{"text":" there will be an item saved to memory, and that same item will be saved to your ","type":"text"},{"type":"codeVoice","code":"StorageEngine"},{"type":"text","text":". The "},{"type":"codeVoice","code":"StorageEngine"},{"type":"text","text":" is a concept from "},{"isActive":true,"identifier":"https:\/\/github.com\/mergesort\/Boutique","type":"reference"},{"text":", representing any data storage mechanism that persists data. If you‚Äôre looking into a library like Boutique chances are you‚Äôve used a database, saved files to disk, or stored values in ","type":"text"},{"code":"UserDefaults","type":"codeVoice"},{"text":", and Boutique aims to streamline that process. If you‚Äôre using a database like CoreData, Realm, or even CloudKit, you can build a ","type":"text"},{"type":"codeVoice","code":"StorageEngine"},{"type":"text","text":" tailored to your needs, but Bodega comes with a few built in options you can use. The default suggestion is to use "},{"type":"codeVoice","code":"SQLiteStorageEngine"},{"text":", a simple and fast way to save data to a database in your app.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Once you setup your "},{"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store","type":"reference","isActive":true},{"text":" you‚Äôll never have to think about your persistence layer ever again. Rather than interacting with a database and making queries, you‚Äôll always be using Boutique‚Äôs memory layer. That may sound complex, but all that means is you‚Äôll be saving to and reading from an array. Because you‚Äôre working with a regular array you won‚Äôt have to make changes to your app to accommodate the ","type":"text"},{"type":"reference","identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store","isActive":true},{"text":", everything you‚Äôve come to expect will work out the box, no changes required.","type":"text"}]},{"level":2,"type":"heading","anchor":"Initializing-a-Store","text":"Initializing a Store"},{"inlineContent":[{"type":"text","text":"To start working with a "},{"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store","isActive":true,"type":"reference"},{"type":"text","text":", you‚Äôll first need to initialize a "},{"isActive":true,"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store","type":"reference"},{"type":"text","text":" with a "},{"code":"StorageEngine","type":"codeVoice"}],"type":"paragraph"},{"code":["let store = Store<Item>(","    storage: SQLiteStorageEngine(directory: .defaultStorageDirectory(appendingPath: \"Items\")),","    cacheIdentifier: \\.id",")"],"type":"codeListing","syntax":"swift"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"type":"codeVoice","code":"storage"},{"type":"text","text":" parameter is populated with a "},{"type":"codeVoice","code":"StorageEngine"},{"type":"text","text":", you can read more about it in "},{"identifier":"https:\/\/mergesort.github.io\/Bodega\/documentation\/bodega\/using-storageengines","type":"reference","isActive":true},{"type":"text","text":". Our SQLite database will be created in the platform‚Äôs default storage directory, nested in an "},{"type":"codeVoice","code":"Items"},{"text":" subdirectory. On macOS this will be the ","type":"text"},{"type":"codeVoice","code":"Application Support"},{"type":"text","text":" directory, and on every other platform such as iOS this will be the "},{"type":"codeVoice","code":"Documents"},{"type":"text","text":" directory. If you need finer control over the location you can specify a "},{"type":"codeVoice","code":"FileManager.Directory"},{"text":" such as ","type":"text"},{"code":".documents","type":"codeVoice"},{"type":"text","text":", "},{"code":".caches","type":"codeVoice"},{"text":", ","type":"text"},{"type":"codeVoice","code":".temporary"},{"type":"text","text":", or even provide your own URL, also explored in "},{"identifier":"https:\/\/mergesort.github.io\/Bodega\/documentation\/bodega\/using-storageengines","isActive":true,"type":"reference","overridingTitle":"Bodega‚Äôs StorageEngine documentation","overridingTitleInlineContent":[{"text":"Bodega‚Äôs StorageEngine documentation","type":"text"}]},{"type":"text","text":"."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"The ","type":"text"},{"type":"codeVoice","code":"cacheIdentifier"},{"text":" is a ","type":"text"},{"code":"KeyPath<Model, String>","type":"codeVoice"},{"text":" that your model must provide. That may seem unconventional at first, so let‚Äôs break it down. Much like how protocols enforce a contract, the KeyPath is doing the same for our model. To be inserted into our ","type":"text"},{"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store","isActive":true,"type":"reference"},{"text":" and saved to disk our models must conform to ","type":"text"},{"code":"Codable & Sendable & Equatable","type":"codeVoice"},{"text":", both of which are reasonable constraints given the data has to be serializable and searchable. But what we‚Äôre trying to avoid is making our models have to conform to a specialized caching protocol, we want to be able to save any ol‚Äô object you already have in your app. Instead of creating a protocol like ","type":"text"},{"type":"codeVoice","code":"Storable"},{"text":", we instead ask the model to tell us how we can derive a unique string which will be used as a key when storing the item.","type":"text"}]}]}],"type":"unorderedList"},{"inlineContent":[{"text":"If your model (in this case ","type":"text"},{"type":"codeVoice","code":"Item"},{"type":"text","text":") already conforms to "},{"type":"codeVoice","code":"Identifiable"},{"text":", we can simplify our initializer by eschewing the ","type":"text"},{"type":"codeVoice","code":"cacheIdentifier"},{"type":"text","text":" parameter."}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["let store = Store<Item>(","    storage: SQLiteStorageEngine(directory: .defaultStorageDirectory(appendingPath: \"Items\"))",")"]},{"inlineContent":[{"type":"text","text":"And since "},{"code":"SQLiteStorageEngine","type":"codeVoice"},{"type":"text","text":" is provided to Boutique by Bodega, Bodega exposes a "},{"type":"codeVoice","code":"default(appendingPath:)"},{"type":"text","text":" initializer we can use."}],"type":"paragraph"},{"syntax":"swift","code":["static let store = Store<Item>(","    storage: SQLiteStorageEngine.default(appendingPath: \"Items\")",")"],"type":"codeListing"},{"type":"paragraph","inlineContent":[{"text":"This is how simple it is to create a full database-backed persistence layer, only one line of code for something that can take hundreds of lines to implement otherwise.","type":"text"}]},{"type":"heading","level":2,"text":"How Are Items Stored?","anchor":"How-Are-Items-Stored"},{"inlineContent":[{"type":"text","text":"We‚Äôll explore how to use "},{"type":"codeVoice","code":".insert(item: Item)"},{"type":"text","text":" to save items, but it‚Äôs worth taking a minute to discuss how items are stored in the "},{"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store","isActive":true,"type":"reference"},{"type":"text","text":". When an item is saved to a "},{"isActive":true,"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store","type":"reference"},{"text":", that item is added to an array of ","type":"text"},{"type":"codeVoice","code":"items"},{"text":", and it is also persisted by the ","type":"text"},{"code":"StorageEngine","type":"codeVoice"},{"type":"text","text":". If we use "},{"type":"codeVoice","code":"DiskStorageEngine"},{"text":" the item will be saved to a disk, or if we use ","type":"text"},{"code":"SQLiteStorageEngine","type":"codeVoice"},{"type":"text","text":" the item will be saved to a database. The items are saved to the directory specified in the "},{"type":"codeVoice","code":"DiskStorageEngine"},{"text":" or ","type":"text"},{"type":"codeVoice","code":"SQLiteStorageEngine"},{"type":"text","text":" initializer, and each item will be stored uniquely based on it‚Äôs "},{"type":"codeVoice","code":"cacheIdentifier"},{"text":" key.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"The ","type":"text"},{"type":"codeVoice","code":"cacheIdentifier"},{"type":"text","text":" provides a mechanism for disambiguating objects, guaranteeing uniqueness of the items in our "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store"},{"text":". You never have to think about whether the item needs to be added or inserted (overwriting a matching item), or what index to insert an item at. Since we have a ","type":"text"},{"type":"codeVoice","code":"cacheIdentifier"},{"type":"text","text":" for every item we will know when an item should be added or overwritten inside of the "},{"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store","isActive":true,"type":"reference"},{"text":". This behavior means the ","type":"text"},{"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store","isActive":true,"type":"reference"},{"text":" operates more like a ","type":"text"},{"code":"Set","type":"codeVoice"},{"type":"text","text":" than an "},{"type":"codeVoice","code":"Array"},{"text":", because we are inserting items into a bag of objects, and don‚Äôt care in what order.","type":"text"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"As a result the only operations you have to know are "},{"type":"codeVoice","code":".insert"},{"text":", ","type":"text"},{"type":"codeVoice","code":".remove"},{"text":", and ","type":"text"},{"type":"codeVoice","code":".removeAll"},{"type":"text","text":", all of which are explored in the "},{"type":"strong","inlineContent":[{"type":"text","text":"Store Operations"}]},{"text":" section below. If you do need to sort the items into a particular order, for example if you‚Äôre displaying the items alphabetically, you can always use the ","type":"text"},{"code":"items","type":"codeVoice"},{"type":"text","text":" property of a "},{"isActive":true,"type":"reference","identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store"},{"type":"text","text":" and sort, filter, map, or transform it as you would any other array."}]},{"type":"paragraph","inlineContent":[{"text":"To see how this looks I would highly recommend checking out the ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/github.com\/mergesort\/Boutique\/tree\/main\/Demo"},{"text":", as it shows off more complex examples of what Boutique and the Store can do. There‚Äôs even an example of how to sort items in a View based on time of creation ","type":"text"},{"identifier":"https:\/\/github.com\/mergesort\/Boutique\/blob\/main\/Demo\/Demo\/Components\/FavoritesCarouselView.swift#L152-L154","isActive":true,"type":"reference"},{"type":"text","text":"."}]},{"type":"heading","text":"Store Operations","anchor":"Store-Operations","level":2},{"inlineContent":[{"text":"The ","type":"text"},{"code":"items","type":"codeVoice"},{"type":"text","text":" property of a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store"},{"text":" has an access control of ","type":"text"},{"type":"codeVoice","code":"public private (set)"},{"type":"text","text":", preventing the direct modification of the "},{"type":"codeVoice","code":"items"},{"text":" array. If you want to mutate the ","type":"text"},{"code":"items","type":"codeVoice"},{"type":"text","text":" of a "},{"isActive":true,"type":"reference","identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store"},{"type":"text","text":" you need to use the three functions the "},{"isActive":true,"type":"reference","identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store"},{"type":"text","text":" exposes. The API surface area is very small though, there are only three functions you need to know."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Inserts an item into the "},{"isActive":true,"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store","type":"reference"}],"type":"paragraph"},{"code":["let coat = Item(name: \"coat\")","try await store.insert(coat)"],"syntax":"swift","type":"codeListing"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Remove an item from the "},{"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store","type":"reference","isActive":true}]},{"type":"codeListing","syntax":"swift","code":["try await store.remove(coat)"]},{"inlineContent":[{"text":"Remove all the items a ","type":"text"},{"isActive":true,"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store","type":"reference"}],"type":"paragraph"},{"syntax":"swift","code":["try await store.removeAll()"],"type":"codeListing"},{"inlineContent":[{"text":"You can even chain operations using the ","type":"text"},{"type":"codeVoice","code":".run()"},{"type":"text","text":" function, executing them in the order they are appended to the "},{"type":"reference","identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store","isActive":true},{"type":"text","text":". This is really useful for situations where you want to clear your "},{"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store","type":"reference","isActive":true},{"type":"text","text":" before adding new items, such as downloading a fresh set of data from a server."}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["try await store","    .removeAll()","    .insert(coat)","    .run()"]},{"anchor":"Sync-or-Async","level":2,"type":"heading","text":"Sync or Async?"},{"type":"paragraph","inlineContent":[{"type":"text","text":"To work with @"},{"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Stored","isActive":true,"type":"reference"},{"type":"text","text":" or alternative property wrappers the "},{"type":"reference","identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store","isActive":true},{"text":" must be initialized synchronously. This means that the ","type":"text"},{"type":"codeVoice","code":"items"},{"text":" of your ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store"},{"type":"text","text":" will be loaded in the background, and may not be available immediately. However this can be an issue if you are using the "},{"isActive":true,"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store","type":"reference"},{"type":"text","text":" directly and need to show the contents of the "},{"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store","isActive":true,"type":"reference"},{"text":" immediately, such as on your app‚Äôs launch‚Äô. The ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store"},{"type":"text","text":" provides you with two options to handle a scenario like this."}]},{"type":"paragraph","inlineContent":[{"text":"By using the ","type":"text"},{"type":"codeVoice","code":"async"},{"text":" overload of the ","type":"text"},{"type":"reference","isActive":true,"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store"},{"text":" initializer your ","type":"text"},{"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store","isActive":true,"type":"reference"},{"type":"text","text":" will be returned once all of the "},{"type":"codeVoice","code":"items"},{"text":" are loaded.","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["let store: Store<Item>","","init() async throws {","    store = try await Store(...)","    \/\/ Now the store will have `items` already loaded.","    let items = await store.items","}"]},{"type":"paragraph","inlineContent":[{"text":"Alternatively you can use the synchronous initializer, and then await for items to load before accessing them.","type":"text"}]},{"type":"codeListing","code":["let store: Store<Item> = Store(...)","","func getItems() async -> [Item] {","    try await store.itemsHaveLoaded() ","    return await store.items","}"],"syntax":"swift"},{"inlineContent":[{"type":"text","text":"The synchronous initializer is a sensible default, but if your app‚Äôs needs dictate displaying data only once you‚Äôve loaded all of the necessary items the asynchronous initializers are there to help."}],"type":"paragraph"},{"text":"Your Favorite Actor üë©üèª‚Äçüé§","anchor":"Your-Favorite-Actor-üë©üèª‚Äçüé§","type":"heading","level":2},{"type":"paragraph","inlineContent":[{"text":"You may have noticed that the ","type":"text"},{"type":"codeVoice","code":"Store"},{"text":", ","type":"text"},{"type":"codeVoice","code":"StoredValue"},{"text":", and ","type":"text"},{"code":"SecurelyStoredValue","type":"codeVoice"},{"type":"text","text":" are bound to the "},{"code":"@MainActor","type":"codeVoice"},{"type":"text","text":". This may seem like it could cause performance issues, but I‚Äôm confident that is not the case Boutique or apps using Boutique."}]},{"type":"paragraph","inlineContent":[{"text":"It‚Äôs important to remember that the ","type":"text"},{"type":"codeVoice","code":"@MainActor"},{"type":"text","text":" annotation dictates how "},{"type":"emphasis","inlineContent":[{"type":"text","text":"synchronous"}]},{"text":" work should be done within a scope (types, functions, etc), ","type":"text"},{"type":"strong","inlineContent":[{"type":"text","text":"not whether asynchronous work will run on the main thread"}]},{"type":"text","text":". If you have heavy synchronous work within a type that‚Äôs annotated "},{"type":"codeVoice","code":"@MainActor"},{"type":"text","text":", then you are liable to seeing performance issues. But if you have heavy asynchronous work, then you will not incur any performance issues unless that asynchronous work is happening on the main thread because the callee said to perform it on the main thread. The "},{"code":"@MainActor","type":"codeVoice"},{"type":"text","text":" annotation can and will not force asynchronous work such as network requests or heavy data processing to happen on the main thread, that will only happen if the code you‚Äôre calling into runs on the main thread."}]},{"inlineContent":[{"type":"text","text":"This is where the architecture of Boutique and the underlying framework Bodega matter. All of of the code in Bodega is async and never calls to the main thread, as is almost every single line of Boutique. Even the synchronous work in Boutique is not heavy, it is all working on data in memory, and calls out to async work that will happen on a background thread. This means that all of the heavy work Boutique does is ultimately on a background thread, even with the Store having a "},{"type":"codeVoice","code":"@MainActor"},{"text":" annotation.","type":"text"}],"type":"paragraph"},{"anchor":"Observing-Store-Changes","type":"heading","text":"Observing Store Changes","level":2},{"text":"onChange","level":4,"anchor":"onChange","type":"heading"},{"type":"paragraph","inlineContent":[{"text":"With Boutique you can observe changes to a ","type":"text"},{"type":"reference","isActive":true,"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store"},{"text":"‚Äòs items using SwiftUI‚Äôs ","type":"text"},{"type":"codeVoice","code":".onChange"},{"text":" modifier:","type":"text"}]},{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"New:"}],"type":"strong"},{"type":"text","text":" Previously Boutique 1.x and 2.x we would use "},{"code":".onReceive","type":"codeVoice"},{"type":"text","text":" rather than "},{"type":"codeVoice","code":".onChange"},{"type":"text","text":"."}]},{"type":"codeListing","syntax":"swift","code":["struct NotesListView: View {","    @State var notesController: NotesController","    @State private var notes: [Note] = []","","    var body: some View {","        VStack {","            ForEach(self.notes) { note in","                Text(note.text)","                    .onTapGesture {","                        Task {","                            try await notesController.removeNote(note)","                        }","                    }","            }","        }","        .onChange(of: notesController.notes, initial: true) { _, newValue in","            \/\/ We can even create complex pipelines, for example filtering all notes smaller than a tweet","            self.notes = newValue.filter { $0.length < 280 }","        }","    }","}"]},{"inlineContent":[{"text":"In the view above, we‚Äôre observing changes to ","type":"text"},{"type":"codeVoice","code":"notesController.notes"},{"type":"text","text":" using the "},{"code":".onChange","type":"codeVoice"},{"text":" modifier. The ","type":"text"},{"type":"codeVoice","code":"initial: true"},{"text":" parameter ensures that our handler is called when the view first appears, similar to how ","type":"text"},{"type":"codeVoice","code":"onReceive"},{"text":" would behave with it‚Äôs‚Äô initial value.","type":"text"}],"type":"paragraph"},{"level":4,"type":"heading","anchor":"Granular-Event-Tracking","text":"Granular Event Tracking"},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"New:","type":"text"}]},{"type":"text","text":" You can also observe more granular events using the "},{"type":"strong","inlineContent":[{"type":"text","text":"Granular Events"}]},{"text":" API:","type":"text"}]},{"syntax":"swift","type":"codeListing","code":["func monitorNotesEvents() async {","    for await event in notesController.$notes.events {","        switch event.operation {","        case .initialized:","            print(\"Notes Store has initialized\")","        case .loaded:","            print(\"Notes Store has loaded with notes\", event.items)","        case .insert:","            print(\"Notes Store inserted notes\", event.items)","        case .remove:","            print(\"Notes Store removed notes\", event.items)","        }","    }","}"]},{"type":"paragraph","inlineContent":[{"text":"The Store‚Äôs ","type":"text"},{"code":"events","type":"codeVoice"},{"text":" property is an ","type":"text"},{"type":"codeVoice","code":"AsyncStream<StoreEvent>"},{"text":", which tells you two crucial pieces of information for granular observation.","type":"text"}]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"You will be told what type of event occured, most commonly "},{"code":"insert","type":"codeVoice"},{"type":"text","text":" or "},{"type":"codeVoice","code":"remove"},{"text":". This is also a good way to know when the ","type":"text"},{"type":"codeVoice","code":"Store"},{"text":" was ","type":"text"},{"type":"codeVoice","code":"initialized"},{"text":" or ","type":"text"},{"code":"loaded","type":"codeVoice"},{"text":", helping differentiate between two events where the result may be an empty array.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"You wll be told which items changed. This is different than using ","type":"text"},{"code":".onChange","type":"codeVoice"},{"text":", which outputs the new state of a Store‚Äôs items, based on what items were inserted or removed.","type":"text"}]}]}]},{"inlineContent":[{"type":"text","text":"This provides more granular control over how you respond to changes in the "},{"type":"reference","identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store","isActive":true},{"type":"text","text":"."}],"type":"paragraph"},{"text":"Further Exploration, @Stored And More","level":2,"type":"heading","anchor":"Further-Exploration-Stored-And-More"},{"type":"paragraph","inlineContent":[{"text":"Building an app using the ","type":"text"},{"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store","type":"reference","isActive":true},{"type":"text","text":" can be really powerful because it leans into SwiftUI‚Äôs state-driven architecture, while providing you with offline-first capabilities, realtime updates across your app, with almost no additional code required."}]},{"inlineContent":[{"type":"text","text":"We‚Äôve introduced the "},{"type":"reference","identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store","isActive":true},{"type":"text","text":", but the real power lies when you start to use Boutique‚Äôs property wrappers, @"},{"type":"reference","isActive":true,"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Stored"},{"type":"text","text":", @"},{"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/StoredValue","isActive":true,"type":"reference"},{"type":"text","text":", and @"},{"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/SecurelyStoredValue","type":"reference","isActive":true},{"text":". These property wrappers help deliver on the promise of working with regular Swift values and arrays yet having data persisted automatically, without ever having to think about the concept of a database.","type":"text"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The next step is to explore how they work, with a small example SwiftUI app."}]},{"items":[{"content":[{"inlineContent":[{"isActive":true,"type":"reference","identifier":"doc:\/\/Boutique\/documentation\/Boutique\/The-@Stored-Family-Of-Property-Wrappers"}],"type":"paragraph"}]}],"type":"unorderedList"},{"type":"paragraph","inlineContent":[{"type":"text","text":"As a reminder you can always play around with the code yourself."}]},{"items":[{"content":[{"inlineContent":[{"type":"reference","isActive":true,"overridingTitle":"A Boutique Demo App","overridingTitleInlineContent":[{"text":"A Boutique Demo App","type":"text"}],"identifier":"https:\/\/github.com\/mergesort\/Boutique\/tree\/main\/Demo"}],"type":"paragraph"}]}],"type":"unorderedList"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Or read through an in-depth technical walkthrough of Boutique, and how it powers the Model View Controller Store architecture."}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"identifier":"https:\/\/build.ms\/2022\/06\/22\/model-view-controller-store","isActive":true,"type":"reference"}],"type":"paragraph"}]}]}]}],"hierarchy":{"paths":[["doc:\/\/Boutique\/documentation\/Boutique"]]},"references":{"doc://Boutique/documentation/Boutique/SecurelyStoredValue":{"kind":"symbol","fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"SecurelyStoredValue","kind":"identifier"}],"navigatorTitle":[{"text":"SecurelyStoredValue","kind":"identifier"}],"url":"\/documentation\/boutique\/securelystoredvalue","abstract":[{"text":"The @","type":"text"},{"type":"reference","identifier":"doc:\/\/Boutique\/documentation\/Boutique\/SecurelyStoredValue","isActive":true},{"text":" property wrapper automagically persists a single ","type":"text"},{"type":"codeVoice","code":"Item"},{"text":" in the system ","type":"text"},{"type":"codeVoice","code":"Keychain"},{"type":"text","text":" "},{"type":"text","text":"rather than an array of items that would be persisted in a "},{"isActive":true,"type":"reference","identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store"},{"text":" or using @","type":"text"},{"isActive":true,"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Stored","type":"reference"},{"type":"text","text":"."}],"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/SecurelyStoredValue","role":"symbol","title":"SecurelyStoredValue","type":"topic"},"doc://Boutique/documentation/Boutique":{"kind":"symbol","url":"\/documentation\/boutique","abstract":[{"text":"A simple but surprisingly fancy data store and so much more","type":"text"}],"identifier":"doc:\/\/Boutique\/documentation\/Boutique","role":"collection","title":"Boutique","type":"topic"},"doc://Boutique/documentation/Boutique/Store":{"kind":"symbol","abstract":[{"text":"A fancy persistence layer.","type":"text"}],"role":"symbol","fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Store","kind":"identifier"}],"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store","url":"\/documentation\/boutique\/store","type":"topic","title":"Store","navigatorTitle":[{"text":"Store","kind":"identifier"}]},"doc://Boutique/documentation/Boutique/Stored":{"kind":"symbol","abstract":[{"type":"text","text":"The @"},{"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Stored","isActive":true,"type":"reference"},{"text":" property wrapper to automagically initialize a ","type":"text"},{"type":"reference","isActive":true,"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store"},{"text":".","type":"text"}],"role":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Stored","kind":"identifier"}],"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Stored","url":"\/documentation\/boutique\/stored","type":"topic","title":"Stored","navigatorTitle":[{"kind":"identifier","text":"Stored"}]},"doc://Boutique/documentation/Boutique/The-@Stored-Family-Of-Property-Wrappers":{"role":"article","abstract":[{"type":"text","text":"Property Wrappers that take the "},{"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store","type":"reference","isActive":true},{"text":" and make it magical. ‚ú®","type":"text"}],"kind":"article","title":"The @Stored Family Of Property Wrappers","url":"\/documentation\/boutique\/the-@stored-family-of-property-wrappers","identifier":"doc:\/\/Boutique\/documentation\/Boutique\/The-@Stored-Family-Of-Property-Wrappers","type":"topic"},"doc://Boutique/documentation/Boutique/StoredValue":{"role":"symbol","abstract":[{"type":"text","text":"The @"},{"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/StoredValue","type":"reference","isActive":true},{"type":"text","text":" property wrapper to automagically persist a single "},{"code":"Item","type":"codeVoice"},{"text":" in ","type":"text"},{"type":"codeVoice","code":"UserDefaults"},{"text":" ","type":"text"},{"type":"text","text":"rather than an array of items that would be persisted in a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Store"},{"type":"text","text":" or using @"},{"isActive":true,"type":"reference","identifier":"doc:\/\/Boutique\/documentation\/Boutique\/Stored"},{"type":"text","text":"."}],"title":"StoredValue","identifier":"doc:\/\/Boutique\/documentation\/Boutique\/StoredValue","navigatorTitle":[{"kind":"identifier","text":"StoredValue"}],"url":"\/documentation\/boutique\/storedvalue","kind":"symbol","type":"topic","fragments":[{"kind":"keyword","text":"class"},{"text":" ","kind":"text"},{"kind":"identifier","text":"StoredValue"}]},"https://mergesort.github.io/Bodega/documentation/bodega/using-storageengines":{"identifier":"https:\/\/mergesort.github.io\/Bodega\/documentation\/bodega\/using-storageengines","type":"link","title":"Bodega‚Äôs StorageEngine documentation","titleInlineContent":[{"text":"Bodega‚Äôs StorageEngine documentation","type":"text"}],"url":"https:\/\/mergesort.github.io\/Bodega\/documentation\/bodega\/using-storageengines"},"https://build.ms/2022/06/22/model-view-controller-store":{"type":"link","title":"Model View Controller Store: Reinventing MVC for SwiftUI with Boutique","titleInlineContent":[{"text":"Model View Controller Store: Reinventing MVC for SwiftUI with Boutique","type":"text"}],"url":"https:\/\/build.ms\/2022\/06\/22\/model-view-controller-store","identifier":"https:\/\/build.ms\/2022\/06\/22\/model-view-controller-store"},"https://github.com/mergesort/Boutique/blob/main/Demo/Demo/Components/FavoritesCarouselView.swift#L152-L154":{"identifier":"https:\/\/github.com\/mergesort\/Boutique\/blob\/main\/Demo\/Demo\/Components\/FavoritesCarouselView.swift#L152-L154","type":"link","title":"here","titleInlineContent":[{"text":"here","type":"text"}],"url":"https:\/\/github.com\/mergesort\/Boutique\/blob\/main\/Demo\/Demo\/Components\/FavoritesCarouselView.swift#L152-L154"},"https://github.com/mergesort/Boutique":{"title":"Bodega","url":"https:\/\/github.com\/mergesort\/Boutique","titleInlineContent":[{"text":"Bodega","type":"text"}],"identifier":"https:\/\/github.com\/mergesort\/Boutique","type":"link"},"https://github.com/mergesort/Boutique/tree/main/Demo":{"identifier":"https:\/\/github.com\/mergesort\/Boutique\/tree\/main\/Demo","type":"link","title":"Boutique demo app","titleInlineContent":[{"text":"Boutique demo app","type":"text"}],"url":"https:\/\/github.com\/mergesort\/Boutique\/tree\/main\/Demo"}}}